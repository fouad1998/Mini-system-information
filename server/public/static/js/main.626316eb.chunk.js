(this["webpackJsonpmin-system-information"]=this["webpackJsonpmin-system-information"]||[]).push([[0],{451:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(28),a=n.n(c),i=n(147),o=n(31),s=n.n(o),u=n(50),l=n(32),j=n(460),d=n(461),b=n(462),f=n(34),p=n(106),O=n.n(p),h=n(7),x=Object(r.createContext)({}),m=function(e){var t=e.children,n=Object(r.useState)(!1),c=Object(l.a)(n,2),a=c[0],o=c[1],p=Object(r.useState)(""),m=Object(l.a)(p,2),v=m[0],g=m[1],w=Object(r.useState)([]),k=Object(l.a)(w,2),C=k[0],y=k[1],S=Object(r.useState)([]),A=Object(l.a)(S,2),T=A[0],z=A[1],R=Object(r.useState)(void 0),D=Object(l.a)(R,2),F=D[0],B=D[1],N=Object(r.useCallback)((function(e){g(e)}),[]),P=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t,n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(void 0),o(!0),e.next=5,O.a.get("http://localhost:8000/entries");case 5:t=e.sent,n=t.data,r=n.entries,c=n.authors,z(c),y(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),B("\xc9chec de t\xe9l\xe9chargment des donn\xe9es, svp reessayer une autre fois");case 16:return e.prev=16,o(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,12,16,19]])}))),[]),H=Object(r.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new FormData).append("name",t.name),n.append("description",t.description),n.append("owner",t.owner),n.append("file",t.file),e.next=8,O.a.post("http://localhost:8000/add",n);case 8:return r=e.sent,c=r.data,y((function(e){return[].concat(Object(i.a)(e),[c])})),z((function(e){return e.includes(c.owner)?e:[].concat(Object(i.a)(e),[c.owner])})),e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),[]),M=Object(r.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("http://localhost:8000/remove?id="+t);case 3:return y((function(e){return e.filter((function(e){return e.id!==t}))})),e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[]),E=Object(r.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new FormData).append("id",t.id),n.append("name",t.name),n.append("description",t.description),n.append("owner",t.owner),"object"===typeof t.file&&n.append("file",t.file),e.next=9,O.a.post("http://localhost:8000/update",n);case 9:return y((function(e){var n=e.find((function(e){return e.id===t.id}));return"object"!==typeof n?e:(n.name=t.name,n.description=t.description,n.owner=t.owner,Object(i.a)(e))})),e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){P()}),[P]),Object(h.jsx)(x.Provider,{value:{loading:a,entries:C.filter((function(e){return Object.values(e).map((function(e){return-1!==e.toString().indexOf(v)})).reduce((function(e,t){return e||t}),!1)})),authors:T,onAddHandler:H,onSearch:N,onUpdateHandler:E,onRemoveHandler:M},children:Object(h.jsxs)(j.a,{children:[F&&Object(h.jsx)(d.a,{span:24,children:Object(h.jsx)(b.a,{message:F,type:"error",action:Object(h.jsx)(f.a,{onClick:P,children:"Recharger"})})}),Object(h.jsx)(d.a,{span:24,children:t})]})})},v=n(24),g=n(459),w=n(455),k=n(222),C=n(464),y=n(465),S=n(86),A=n(456),T=n(458),z=n(453),R=n(463),D=A.a.Dragger,F=function(e){var t=e.visible,n=e.id,c=e.setAlert,a=e.onModalToggleHanlder,i=Object(r.useContext)(x),o=i.entries,b=i.authors,f=i.onUpdateHandler,p=Object(r.useState)(!1),O=Object(l.a)(p,2),m=O[0],w=O[1],k=Object(r.useState)({name:"",description:"",owner:"",file:void 0}),C=Object(l.a)(k,2),y=C[0],A=C[1],F=Object(r.useCallback)((function(){A({name:"",description:"",owner:"",file:void 0})}),[]),B=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,f(Object(v.a)(Object(v.a)({},y),{},{id:n}));case 3:t=e.sent,w(!1),t?(c({type:"success",message:"Fichier est mis \xe0 jour avec succ\xe8s"}),F(),a()):c({type:"error",message:"Op\xe9ration \xe9chaouie, le fichier n'est pas mis \xe0 jour"});case 6:case"end":return e.stop()}}),e)}))),[y,n,a,F,f,c]),N=Object(r.useCallback)((function(e){return function(t){var n=t.target.value;A((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(S.a)({},e,n))}))}}),[]);return Object(r.useEffect)((function(){var e=o.find((function(e){return e.id===n}));"object"===typeof e&&(console.log("foudn",e,e.owner),A(Object(v.a)({},e)))}),[o,n]),console.log(y.owner),Object(h.jsx)(g.a,{title:"Ajouter un nouveau fichier",visible:t,okButtonProps:{disabled:m},cancelButtonProps:{disabled:m},okText:"Modifier",cancelText:"Annuler",onCancel:a,onOk:B,children:Object(h.jsxs)(j.a,{gutter:[8,8],children:[Object(h.jsx)(d.a,{span:24,children:Object(h.jsx)(T.a,{addonBefore:"Nom du fichier",onChange:N("name"),value:y.name})}),Object(h.jsx)(d.a,{span:24,children:Object(h.jsx)(z.a,{style:{width:"100%"},options:b.map((function(e){return{label:e,value:e}})),value:y.owner,onSelect:function(e){A((function(t){return Object(v.a)(Object(v.a)({},t),{},{owner:e})}))},children:Object(h.jsx)(T.a,{addonBefore:"Proprietaire",onChange:N("owner"),value:y.owner})})}),Object(h.jsx)(d.a,{span:24,children:Object(h.jsx)(T.a.TextArea,{rows:4,autoSize:{maxRows:10,minRows:4},placeholder:"Description",onChange:N("description"),value:y.description})}),Object(h.jsx)(d.a,{span:24,children:Object(h.jsxs)(D,{name:"file",fileList:"undefined"===typeof y.file?[]:[y.file],onRemove:function(){return A((function(e){return Object(v.a)(Object(v.a)({},e),{},{file:void 0})})),!0},beforeUpload:function(e){return A((function(t){return Object(v.a)(Object(v.a)({},t),{},{file:e})})),!1},children:[Object(h.jsx)("p",{className:"ant-upload-drag-icon",children:Object(h.jsx)(R.a,{})}),Object(h.jsx)("p",{className:"ant-upload-text",children:"Cliquez ou lachez un fichier dans la zone"})]})})]})})},B=g.a.confirm,N=function(){var e=Object(r.useContext)(x),t=e.entries,n=e.loading,c=e.onRemoveHandler,a=Object(r.useState)(!1),i=Object(l.a)(a,2),o=i[0],p=i[1],O=Object(r.useState)({type:"error",message:""}),m=Object(l.a)(O,2),g=m[0],S=m[1],A=Object(r.useState)(""),T=Object(l.a)(A,2),z=T[0],R=T[1],D=Object(r.useCallback)((function(){p((function(e){return!e}))}),[]),N=Object(r.useCallback)((function(e,t){return function(){B({title:"Supprimer ".concat(t,"?"),content:"Etes vous sur de vouloir supprimer le fichier suivant: ".concat(t,"."),okText:"Oui, je confirme",cancelText:"Annuler",onOk:function(){var t=Object(u.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e);case 2:n=t.sent,S(n?{type:"success",message:"Le fichier est supprim\xe9 avec succ\xe8s"}:{type:"error",message:"Fichier n'est pas supprim\xe9"});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}}),[c]),P=Object(r.useCallback)((function(e,t){return function(){R(e),D()}}),[D]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(F,{visible:o,id:z,setAlert:S,onModalToggleHanlder:D}),Object(h.jsxs)(j.a,{gutter:[8,16],children:[""!==g.message&&Object(h.jsx)(d.a,{span:24,children:Object(h.jsx)(b.a,{message:g.message,type:g.type,onClose:function(){S((function(e){return Object(v.a)(Object(v.a)({},e),{},{message:""})}))},closable:!0})}),Object(h.jsx)(d.a,{span:24,children:Object(h.jsx)(w.a,{dataSource:t,loading:n,rowKey:function(e){return e.id},title:function(){return Object(h.jsx)("strong",{children:"Tous vous documents sont list\xe9s ci-dessous"})},pagination:{defaultPageSize:25,disabled:!1,position:["bottomRight"],showTitle:!0,pageSizeOptions:[25,50,100,250,500],showTotal:function(e){return Object(h.jsxs)("strong",{children:["Nombre du documents enregistr\xe9 est: ",e]})}},columns:[{title:"Nom",onFilter:function(e,t){return-1!==t.name.indexOf(e)},sorter:function(e,t){return e.name>t.name?1:-1},render:function(e,t){return t.name}},{title:"Description",filtered:!0,filterSearch:!0,onFilter:function(e,t){return-1!==t.description.indexOf(e)},render:function(e,t){return t.description}},{title:"Proprietaire",onFilter:function(e,t){return-1!==t.owner.indexOf(e)},render:function(e,t){return t.owner}},{title:"Cr\xe9e le",sorter:function(e,t){return e.createdAt>t.createdAt?1:-1},render:function(e,t){return new Date(t.createdAt).toLocaleDateString("fr-fr")}},{title:"Modifi\xe9 le",sorter:function(e,t){return e.modifiedAt>t.modifiedAt?1:-1},render:function(e,t){return new Date(t.modifiedAt).toLocaleDateString("fr-fr")}},{title:"Extension",onFilter:function(e,t){return-1!==t.extension.indexOf(e)},render:function(e,t){return t.extension}},{title:"Nom fichier sur le system",onFilter:function(e,t){return-1!==t.filename.indexOf(e)},render:function(e,t){return t.filename}},{title:"Actions",render:function(e,t){return Object(h.jsxs)(j.a,{gutter:[8,8],wrap:!1,children:[Object(h.jsx)(d.a,{children:Object(h.jsx)(f.a,{shape:"circle",onClick:function(){window.open("http://localhost:8000/file?id="+t.id)},children:Object(h.jsx)(k.a,{})})}),Object(h.jsx)(d.a,{children:Object(h.jsx)(f.a,{onClick:P(t.id,t.name,t.description,t.owner),shape:"circle",children:Object(h.jsx)(C.a,{})})}),Object(h.jsx)(d.a,{children:Object(h.jsx)(f.a,{shape:"circle",onClick:N(t.id,t.name),danger:!0,children:Object(h.jsx)(y.a,{})})})]})}}]})})]})]})},P=n(454),H=n(457),M=n(214),E=n(466),L=A.a.Dragger,U=function(){var e=Object(r.useContext)(x),t=e.authors,n=e.onAddHandler,c=e.onSearch,a=Object(r.useState)(!1),i=Object(l.a)(a,2),o=i[0],p=i[1],O=Object(r.useState)({type:"error",message:""}),m=Object(l.a)(O,2),w=m[0],k=m[1],C=Object(r.useState)({name:"",description:"",owner:"",file:void 0}),y=Object(l.a)(C,2),A=y[0],D=y[1],F=Object(r.useState)(!1),B=Object(l.a)(F,2),N=B[0],P=B[1],H=Object(r.useCallback)((function(e){return function(t){var n=t.target.value;D((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(S.a)({},e,n))}))}}),[]),M=Object(r.useCallback)((function(){p((function(e){return!e}))}),[]),U=Object(r.useCallback)((function(){D({name:"",description:"",owner:"",file:void 0})}),[]),q=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,n(A);case 3:t=e.sent,P(!1),t?(k({type:"success",message:"Fichier est ajout\xe9 avec succ\xe8s"}),U(),M()):k({type:"error",message:"Op\xe9ration \xe9chaouie, le fichier n'est pas ajout\xe9"});case 6:case"end":return e.stop()}}),e)}))),[A,n,M,U]);return Object(h.jsxs)(j.a,{gutter:[8,8],justify:"end",children:[""!==w.message&&Object(h.jsx)(d.a,{span:24,children:Object(h.jsx)(b.a,{message:w.message,type:w.type,onClose:function(){k((function(e){return Object(v.a)(Object(v.a)({},e),{},{message:""})}))},closable:!0})}),Object(h.jsx)(d.a,{flex:"1 1 auto",children:Object(h.jsx)(T.a.Search,{size:"large",placeholder:"chercher parmi vos documents et proprietaires",onSearch:c})}),Object(h.jsx)(d.a,{flex:"1 1 auto"}),Object(h.jsx)(d.a,{children:Object(h.jsx)(f.a,{type:"primary",size:"large",onClick:M,children:Object(h.jsxs)(j.a,{gutter:8,wrap:!1,children:[Object(h.jsx)(d.a,{children:Object(h.jsx)(E.a,{})}),Object(h.jsx)(d.a,{children:"Add"})]})})}),Object(h.jsx)(g.a,{title:"Ajouter un nouveau fichier",visible:o,okButtonProps:{disabled:N},cancelButtonProps:{disabled:N},okText:"Ajouter",cancelText:"Annuler",onCancel:M,onOk:q,children:Object(h.jsxs)(j.a,{gutter:[8,8],children:[Object(h.jsx)(d.a,{span:24,children:Object(h.jsx)(T.a,{addonBefore:"Nom du fichier",onChange:H("name"),value:A.name})}),Object(h.jsx)(d.a,{span:24,children:Object(h.jsx)(z.a,{style:{width:"100%"},value:A.owner,options:t.map((function(e){return{label:e,value:e}})),onSelect:function(e){D((function(t){return Object(v.a)(Object(v.a)({},t),{},{owner:e})}))},children:Object(h.jsx)(T.a,{addonBefore:"Proprietaire",onChange:H("owner"),value:A.owner})})}),Object(h.jsx)(d.a,{span:24,children:Object(h.jsx)(T.a.TextArea,{rows:4,autoSize:{maxRows:10,minRows:4},placeholder:"Description",onChange:H("description"),value:A.description})}),Object(h.jsx)(d.a,{span:24,children:Object(h.jsxs)(L,{name:"file",fileList:"undefined"===typeof A.file?[]:[A.file],onRemove:function(){return D((function(e){return Object(v.a)(Object(v.a)({},e),{},{file:void 0})})),!0},beforeUpload:function(e){return D((function(t){return Object(v.a)(Object(v.a)({},t),{},{file:e})})),!1},children:[Object(h.jsx)("p",{className:"ant-upload-drag-icon",children:Object(h.jsx)(R.a,{})}),Object(h.jsx)("p",{className:"ant-upload-text",children:"Cliquez ou lachez un fichier dans la zone"})]})})]})})]})},q=function(){return Object(h.jsx)(P.a,{style:{height:"100%",overflow:"hidden",overflowY:"auto"},children:Object(h.jsx)(m,{children:Object(h.jsxs)(j.a,{justify:"center",gutter:[8,32],children:[Object(h.jsx)(d.a,{span:24,children:Object(h.jsx)(H.a,{title:"Mini-system information",subTitle:"WORK SMART"})}),Object(h.jsx)(d.a,{span:22,children:Object(h.jsx)(M.Content,{children:Object(h.jsxs)(j.a,{gutter:[8,8],children:[Object(h.jsx)(d.a,{span:24,children:Object(h.jsx)(U,{})}),Object(h.jsx)(d.a,{span:24,children:Object(h.jsx)(N,{})})]})})})]})})})};n(450);a.a.render(Object(h.jsx)(q,{}),document.getElementById("root"))}},[[451,1,2]]]);
//# sourceMappingURL=main.626316eb.chunk.js.map